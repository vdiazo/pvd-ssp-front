<div class="container-fluid">
  <p class="page-title">Reporte Alta Dirección</p>
</div>
<div class="container-fluid">
  <div class="row">
    <div class="col-lg-8">
      <div class="card card-white">
        <div class="card-header"></div>
        <div class="card-body">
          <div class="row form-group">
            <label dlabels class="col-sm-2 control-label">Región:</label>
            <div class="col-sm-4">
              <ng-select [items]="listRegion" placeholder="Seleccione una región" bindLabel="departamento"
                bindValue="coddepa" [(ngModel)]="model.coddepa" name="coddepa" id="coddepa">
              </ng-select>
            </div>
            <label dlabels class="col-sm-2 control-label">Código Unificado o SNIP:</label>
            <div class="col-sm-4">
              <input dTextBox maxlength="20" (keypress)="funciones.IsNumberKey($event)" class="form-control" type='text'
                name="txtCodigoSnipUnificado" (keyup.enter)="buscarProyecto(model)" [(ngModel)]="model.cod_snip"
                placeholder="SNIP / C.U." />
            </div>
          </div>
          <div class="row form-group">
            <label dlabels class="col-sm-2 control-label">Estado Proyecto:</label>
            <div class="col-sm-4">
              <ng-select [items]="listEstado" placeholder="Seleccione un estado de proyecto" bindLabel="nombre_estado"
                bindValue="codigo_estado" [(ngModel)]="model.codigo_estado" name="codigo_estado" id="codigo_estado">
              </ng-select>
            </div>
            <label dlabels class="col-sm-2 control-label">Unidad Ejecutora:</label>
            <div class="col-sm-4">
              <ng-select [items]="listUnidadEjecutora" placeholder="Seleccione una unidad ejecutora"
                bindLabel="nombre_municipalidad" bindValue="id_municipalidad" [(ngModel)]="model.id_municipalidad"
                name="id_municipalidad" id="id_municipalidad">
              </ng-select>
            </div>
          </div>
          <div class="row form-group">
            <div class="col-sm-12">
              <div class=" pull-right">
                <button type="button" (click)="buscarProyecto(model)" class="btn pull-left btn-plomo" id="btnBuscar">
                  <i class="fa fa-search"></i> Buscar
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-lg-4">
      <div class="card card-auto bg-black-600">
        <div class="card-body">
          <div class="div-centrado text-center c-white">
            <div class="f-s-5rem l-h-100">{{totalRegistros}}</div>
            <div>Registros</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="container-fluid">
  <div class="row">
    <div class="col-12">
      <div class="card card-white">
        <div class="card-head"></div>
        <div class="card-body">
          <div>
            <div class="row form-group">
              <div class="col-12 text-right">
                <a href="javascript:void(0)" class="btn btn-exportar" target="_blank"
                  (click)="exportarFormatoExcel(model)" [hidden]="totalRegistros == 0">
                  <i class="icon icon-excel"></i> Exportar
                </a>
              </div>
            </div>

            <div class="row">


              <div class="col-12 container-scroll">
                <table class="table table-striped table-bordered">
                  <thead class="thead-info">
                    <tr>
                      <th rowspan="2" class="text-center" colspan="3">NOMBRE DEL PROYECTO</th>
                      <th rowspan="2" class="text-center" colspan="3">PLIEGO HABILITADO</th>
                      <th rowspan="2" class="text-center" colspan="3">CÓDIGO DE RUTA</th>
                      <th rowspan="2" class="text-center" colspan="3">SNIP</th>
                      <th rowspan="2" class="text-center" colspan="3">CÓDIGO UNIFICADO</th>
                      <th rowspan="2" class="text-center" colspan="3">ESTADO</th>
                      <th rowspan="2" class="text-center" colspan="3">% AVANCE FISICO</th>
                      <th rowspan="2" class="text-center" colspan="3">% AVANCE FINANCIERO</th>
                      <th colspan="10" class="text-center">CONTRATO DE OBRA</th>
                      <th colspan="15" class=" text-center">META GLOBAL</th>
                      <th colspan="6" class=" text-center">EJECUTADO AÑO ANTERIOR</th>
                      <th colspan="3" class=" text-center">EJECUCIÓN ACUMULADO ACTUAL</th>
                      <th colspan="2" class=" text-center">PROGRAMADO</th>
                      <th rowspan="2" class="text-center">MONTO TRANSFERENCIA</th>
                      <th rowspan="2" class="text-center">DU/DS</th>
                      <th rowspan="2" class="text-center">OBSERVACIONES</th>
                    </tr>
                    <tr>
                      <!-- contrato de obra -->
                      <th colspan="3" class="text-center">N° CONTRATO</th>
                      <th colspan="3" class="text-center">FECHA DE SUSCRPCIÓN</th>
                      <th colspan="4" class="text-center">VALOR ADJUDICADO (S/.)</th>
                      <!-- meta global -->
                      <th colspan="3" class="text-center">INICIO EJECUCIÓN</th>
                      <th colspan="3" class="text-center">FIN EJECUCIÓN</th>
                      <th colspan="3" class="text-center">METAS FÍSICAS</th>
                      <th colspan="3" class="text-center">UNID</th>
                      <th colspan="3" class="text-center">COSTO TOTAL ACTUAL (S/.)</th>
                      <!-- ejecutado 2018 -->
                      <th colspan="3" class="text-center">%</th>
                      <th colspan="3" class="text-center">DEVENGADO AÑO ANTERIOR</th>
                      <!-- ejecutado ejecucion acumulado actual -->
                      <th class="text-center">%</th>
                      <th class="text-center">DEVENGADO ACUMULADO A LA FECHA (S/.)</th>
                      <th class="text-center">AÑO-MES DEL ÚLTIMO DEVENGADO</th>
                      <!-- programado -->
                      <th class="text-center">%</th>
                      <th class="text-center">PIM AÑO ACTUAL (S/.)</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr class="bg-light" *ngFor="let proyecto of listProyecto">
                      <td colspan="3">{{ proyecto.proyecto }}</td>
                      <td colspan="3">{{ proyecto.pliego_habilitado }}</td>
                      <td colspan="3">{{ proyecto.ruta }}</td>
                      <td colspan="3">{{ proyecto.snip }}</td>
                      <td colspan="3">{{ proyecto.codigo_unificado }}</td>
                      <td colspan="3">{{ proyecto.estado }}</td>
                      <td colspan="3">{{ proyecto.avance_fisico }}</td>
                      <td colspan="3">{{ proyecto.avance_financiero }}</td>
                      <td colspan="3" class="text-center">{{ proyecto.nro_contrato }}</td>
                      <td colspan="3" class="text-center">{{ proyecto.fecha_inscripcion | formatoFecha }}</td>
                      <td colspan="4" class="text-center">{{ proyecto.valor_adjudicado | currency: " " }}</td>
                      <td colspan="3" class="text-center">{{ proyecto.inicio_ejecucion | formatoFecha }}</td>
                      <td colspan="3" class="text-center">{{ proyecto.fin_ejecucion | formatoFecha }}</td>
                      <td colspan="3" class="text-center">{{ proyecto.meta_fisica }}</td>
                      <td colspan="3" class="text-center">{{ proyecto.unidad }}</td>
                      <td colspan="3" class="text-center">{{ proyecto.costo_total_actual | currency: " " }}</td>
                      <td colspan="3" class="text-center">{{ proyecto.por_eje_anterior }}</td>
                      <td colspan="3" class="text-center">{{ proyecto.dev_eje_anterior | currency:" " }}</td>
                      <td class="text-center">{{ proyecto.por_eje_actual }}</td>
                      <td class="text-center">{{ proyecto.dev_acu_actual | currency: " " }}</td>
                      <td class="text-center">{{ proyecto.anio_mes_devengado }}</td>
                      <td class="text-center">{{ proyecto.por_programado }}</td>
                      <td class="text-center">{{ proyecto.pim_actual | currency: " " }}</td>
                      <td class="text-center">{{ proyecto.mon_transferencia | currency: " "}}</td>
                      <td>
                        {{proyecto.duds}}
                      </td>
                      <td>
                        {{proyecto.observaciones}}
                      </td>
                    </tr>
                  </tbody>
                </table>
                <!-- <table class="table table-hover table-responsive" #table></table>
                    <table class="table table-hover table-bordered table-responsive table-full-detalle">
                    <thead class="table-active">
                      <tr>
                        <th rowspan="2">ESTRUCTURA DE INTERVENCIONES</th>
                        <th rowspan="2">PLIEGO HABILITADO</th>
                        <th rowspan="2">CODIGO DE RUTA</th>
                        <th rowspan="2">SNIP</th>
                        <th rowspan="2">CÓDIGO UNIFICADO</th>
                        <th rowspan="2">ESTADO</th>
                        <th rowspan="2">% AVANCE FÍSICO</th>
                        <th rowspan="2">% AVANCE FINANCIERO</th>
                        <th colspan="5">META GLOBAL</th>
                        <th colspan="2">EJECUTADO</th>
                        <th colspan="2">PROGRAMADO</th>
                        <th rowspan="2">MONTO TRANSFERENCIA</th>
                        <th rowspan="2">DU/DS</th>
                        <th rowspan="2">OBSERVACIÓN</th>
                      </tr>
                      <tr>
                        <th>INICIO EJECUCIÓN</th>
                        <th>PIM EJECUCIÓN (PLAZO CONTRACTUAL)</th>
                        <th>METAS FÍSICAS</th>
                        <th>UNID</th>
                        <th>COSTO TOTAL ACTUAL(S/.)</th>
                        <th>%</th>
                        <th>EJECUTADO (S/.)</th>
                        <th>%</th>
                        <th>PIM TOTAL (S/.)</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let proyecto of listProyecto">
                        <td class="xs-hidden">{{proyecto.proyeto}}</td>
                        <td class="xs-hidden">{{proyecto.pliego_habilitado}}</td>
                        <td class="xs-hidden">{{proyecto.ruta}}</td>
                        <td class="xs-hidden">{{proyecto.snip}}</td>
                        <td class="xs-hidden">{{proyecto.codigo_unificado}}</td>
                        <td class="xs-hidden">{{proyecto.estado}}</td>
                        <td class="xs-hidden">{{proyecto.avance_fisico}}</td>
                        <td class="xs-hidden">{{proyecto.avance_financiero}}</td>
                        <td class="xs-hidden">{{proyecto.inicio_ejecucion | formatoFecha}}</td>
                        <td class="xs-hidden">{{proyecto.fin_ejecucion | formatoFecha}}</td>
                        <td class="xs-hidden">{{proyecto.meta_fisica}}</td>
                        <td class="xs-hidden">{{proyecto.unidad}}</td>
                        <td class="xs-hidden">{{proyecto.costo_total_actual | currency:" S/" }}</td>
                        <td class="xs-hidden">{{proyecto.porcentaje_ejecutado}}</td>
                        <td class="xs-hidden">{{proyecto.ejecutado| currency:" S/" }}</td>
                        <td class="xs-hidden">{{proyecto.porcentaje_pim}}</td>
                        <td class="xs-hidden">{{proyecto.pim | currency:" S/" }}</td>
                        <td class="xs-hidden">{{proyecto.monto_transferencia | currency:" S/" }}</td>
                        <td class="xs-hidden">{{proyecto.duds}}</td>
                        <td><div class="xs-hidden">{{proyecto.observaciones}}</div>
        
                          <div class="xs-display">
                            <div class="row form-group">
                                <div class="col-12 xs-th">ESTRUCTURA DE INTERVENCIONES</div>
                                <div class="col-12">{{proyecto.proyeto}}</div>
                            </div>
                            <div class="row form-group">
                                <div class="col-12 xs-th">PLIEGO HABILITADO</div>
                                <div class="col-12">{{proyecto.pliego_habilitado}}</div>
                            </div>
                            <div class="row form-group">
                                <div class="col-3 xs-th">CODIGO DE RUTA</div>
                                <div class="col-3">{{proyecto.ruta}}</div>
                                <div class="col-3 xs-th">SNIP</div>
                                <div class="col-3">{{proyecto.snip}}</div>
                            </div>
                            <div class="row form-group">
                                <div class="col-3 xs-th">CÓDIGO UNIFICADO	</div>
                                <div class="col-3">{{proyecto.codigo_unificado}}</div>
                                <div class="col-3 xs-th">ESTADO</div>
                                <div class="col-3">{{proyecto.estado}}</div>
                            </div>
                            <div class="row form-group">
                                <div class="col-3 xs-th">% AVANCE FÍSICO</div>
                                <div class="col-3">{{proyecto.avance_fisico}}</div>
                                <div class="col-3 xs-th">% AVANCE FINANCIERO</div>
                                <div class="col-3">{{proyecto.avance_financiero}}</div>
                            </div>
                            <div class="row form-group">
                                <div class="col-12 xs-th">META GLOBAL</div>
                                <div class="col-3 xs-th">Inicio Ejecución</div>
                                <div class="col-3">{{proyecto.inicio_ejecucion | formatoFecha}}</div>
                                <div class="col-3 xs-th">PIM Ejecución</div>
                                <div class="col-3">{{proyecto.fin_ejecucion | formatoFecha}}</div>
        
                                <div class="col-3 xs-th">Metas Físicas</div>
                                <div class="col-3">{{proyecto.meta_fisica}}</div>
                                <div class="col-3 xs-th">Unid.</div>
                                <div class="col-3">{{proyecto.unidad}}</div>
        
                                <div class="col-3 xs-th">Corto Total Actual</div>
                                <div class="col-3">{{proyecto.costo_total_actual | currency:" S/" }}<</div>
                            </div>
                            <div class="row form-group">
                                <div class="col-12 xs-th">EJECUTADO</div>
                                <div class="col-3 xs-th">%</div>
                                <div class="col-3">{{proyecto.porcentaje_ejecutado}}</div>
                                <div class="col-3 xs-th">Ejecutado</div>
                                <div class="col-3">{{proyecto.ejecutado| currency:" S/" }}</div>
                            </div>
                            <div class="row form-group">
                                <div class="col-12 xs-th">PROGRAMADO</div>
                                <div class="col-3 xs-th">%</div>
                                <div class="col-3">{{proyecto.porcentaje_pim}}</div>
                                <div class="col-3 xs-th">PIM Total</div>
                                <div class="col-3">{{proyecto.pim | currency:" S/" }}</div>
                            </div>
                            <div class="row form-group">
                                <div class="col-3 xs-th">MONTO TRANSFERENCIA</div>
                                <div class="col-3">{{proyecto.monto_transferencia | currency:" S/" }}</div>
                                <div class="col-3 xs-th">DU/DS	</div>
                                <div class="col-3">{{proyecto.duds}}</div>
                            </div>
                            <div class="row">
                                <div class="col-3 xs-th">OBSERVACIÓN</div>
                                <div class="col-9">{{proyecto.observaciones}}</div>
                            </div>
                          </div>
                        </td>
                      </tr>
                      <tr class="f-w-6" [hidden]="totalRegistros == 0" style="display:table-row">
                        <td colspan="10" class="xs-hidden">TOTAL</td>
                        <td class="xs-hidden"></td>
                        <td class="xs-hidden"></td>
                        <td class="xs-hidden">{{total_costo | currency:" S/" }}</td>
                        <td class="xs-hidden"></td>
                        <td class="xs-hidden">{{total_ejecutado | currency:" S/" }}</td>
                        <td class="xs-hidden"></td>
                        <td class="xs-hidden">{{total_pim | currency:" S/" }}</td>
                        <td class="xs-hidden">{{total_monto_transferencia | currency:" S/" }}</td>
                        <td colspan="2">
                            <div class="xs-display">
                                <div class="row">
                                    <div class="col-12 xs-th">TOTAL</div>
                                    <div class="col-3 xs-th">Costo Total Actual</div>
                                    <div class="col-9">{{total_costo | currency:" S/" }}</div>
                                    <div class="col-3 xs-th">Ejecutado</div>
                                    <div class="col-9">{{total_ejecutado | currency:" S/" }}</div>
                                    <div class="col-3 xs-th">PIM Total</div>
                                    <div class="col-9">{{total_pim | currency:" S/" }}</div>
                                    <div class="col-3 xs-th">Monto Transferencia</div>
                                    <div class="col-9">{{total_monto_transferencia | currency:" S/" }}</div>
                                </div>
                            </div>
        
                        </td>
                      </tr>
                    </tbody>
                  </table> -->
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-12">
              <nav class="pt-4 pl-3 pull-right">
                <pagination [totalItems]="totalRegistros" [itemsPerPage]="numPaginasMostrar" [boundaryLinks]="true"
                  previousText="&lsaquo;" nextText="&rsaquo;" [rotate]="false" firstText="&laquo;" lastText="&raquo;"
                  [maxSize]="5" (pageChanged)="cambiarPagina($event)">
                </pagination>
              </nav>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>